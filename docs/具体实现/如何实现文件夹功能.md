# 如何实现文件夹功能

## 1. 问题描述

文件夹功能是一个网盘的基本功能，用户可以在网盘中创建文件夹，删除文件夹，重命名文件夹，移动文件夹，查看文件夹中的文件等。

## 2. 文件夹实现

利用树结构

比如：`根目录文件夹`为`/`(默认为文件夹id),访问根目录为`/index`

在根目录下创建文件夹`hello`，id为`5042c130-ee2c-44a6-96e6-6cbc1839c723`，文件夹隶属于`根目录`，为`/`

在`hello`下创建文件夹`world`，id为`106d4db3-457e-4cc0-90c4-f79e4db37947`，文件夹隶属于`hello`，为`5042c130-ee2c-44a6-96e6-6cbc1839c723`

在`hello`下创建文件夹`world2`，id为`cabe8984-4f22-4888-afb1-1941cf8f828e`，文件夹隶属于`hello`，为`5042c130-ee2c-44a6-96e6-6cbc1839c723`

## 3. 文件隶属关系

如果一个文件隶属于一个文件夹，那么这个文件的隶属`文件夹id`字段就是这个文件夹的`文件夹id`

比如：在根目录下创建文件`hello.txt`，文件隶属的文件夹id为`/`，意为`hello.txt`放在根目录下

`hello`下创建文件`world.txt`，文件隶属的文件夹id为`5042c130-ee2c-44a6-96e6-6cbc1839c723`，意为`world.txt`放在`hello`文件夹下

`hello/world`下创建文件`world2.txt`，文件隶属的文件夹id为`5042c130-ee2c-44a6-96e6-6cbc1839c723`，意为`world2.txt`放在`world`文件夹下

## 4. 文件夹的层级关系

文件夹的层级关系是指文件夹的上下级关系，比如：`hello`文件夹下有`world`文件夹，`world`文件夹下有`f`文件夹，那么`f`文件夹的层级关系就是`hello/world`(只显示父级文件夹，不包含本文件夹)。`f`文件夹的层级关系就是`5042c130-ee2c-44a6-96e6-6cbc1839c723106d4db3-457e-4cc0-90c4-f79e4db37947`(包含所有父类文件夹的id拼接)。

由于uuid的有序性：每个UUID都是一个36个字符长的字符串，包含了数字和字母，并且在每个8-4-4-4-12的部分之间用短横线 "-" 分隔。

所以，直接拼接文件夹id就可以得到文件夹的层级关系，不包含自身文件夹id。
